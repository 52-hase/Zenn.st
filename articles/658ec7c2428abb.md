---
title: "Spotify APIを使い曲の再生機能を実装する"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Spotify]
published: false
---
### 開発環境
- macOS
- VSCode
- Rails 7.1.3.3
- ruby-3.2.3
- PostgreSQL 16.2

### 行いたいこと
- Spotify APIを使い　曲の再生機能を実装する


<br>
<br>
<br>

# Spotify APIを利用するにあたって...
・Spotifyのアカウントを作成する。
・Dashboardから`アプリの登録`と`CLIENT ID`と`CLIENT SECRET ID`の取得をする。
・取得したIDを`環境変数`として`.envファイル`に記載する。

こちらの手順で行いました。
https://zenn.dev/tteaoocl/articles/6cce2e7615c11c

# Gem をインストールする
・以下を追記し`bundle install`
```ruby:Gemfile
gem 'rspotify'
```

# モデルを追加、記載する
・曲の表示方法は、`開催されたライブイベント一覧`⇨`参加したアーティスト一覧`⇨`披露した曲一覧`のようにするため、
  `live_event`, `artist`, `music`, `live_events_artist`モデルを追加する。


    ```ruby:models/artist.rb
    class Artist < ApplicationRecord
      has_many :live_events_artists
      has_many :live_events, through: :live_events_artists
      has_many :musics, dependent: :destroy
    end
    ```

    ```ruby:models/live_event.rb
    class LiveEvent < ApplicationRecord
      has_many :live_events_artists
      has_many :artists, through: :live_events_artists
      has_many :musics
      validates :name, presence: true
      validates :date, presence: true
    end
    ```

    ```ruby:models/live_events_artist.rb
    class LiveEventsArtist < ApplicationRecord
      belongs_to :live_event
      belongs_to :artist
    end
    ```

    ```ruby:models/music.rb
    class Music < ApplicationRecord
      belongs_to :artist
      belongs_to :live_event
    end
    ```







# マイグレージョンファイルの作成
・db/migrate/20240730065005_create_musics.rb
```
$ rails generate migration CreateMusics name:string artist_name:string
```


# config/initializers/rspotify.rb
```
require 'rspotify'
RSpotify.authenticate(ENV['SPOTIFY_CLIENT_ID'], ENV['SPOTIFY_SECRET_ID'])
```
# app/controllers/musics_controller.rb

::::details 

'''


'''

::::

<br>
<br>
<br>