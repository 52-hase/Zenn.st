---
title: "Deviseのパスワードリセット機能を本番環境に設定する"
emoji: "📑"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Devise, パスワードリッセット, 本番環境]
published: false
---
### 行いたいこと
- `本番環境`でDeviseのパスワードリセット機能を使い、指定されたメールアドレスに
`パスワードリセットのメール`を送信する。

### 前提として...
- 開発環境でDeviseによるパスワードリセット機能の実装が済んでいる。
- アプリのデプロイ先は`Heroku`です。

### 実装内容
- `Google`で`アプリパスワード`を生成する。
- 生成した`アプリパスワード`を使い`SMTP`を設定する。
- Heroku側で`環境変数`を設定する。


# Googleでアプリパスワードの生成
・今回はアプリ用に新規でGmailを作成しました。まずGoogleのアカウントにログインします。
::::details ２段階承認をオンにする
・`セキュリティ` ⇨ `Googleにログインする方法` ⇨ `２段階承認プロセス`
[![Image from Gyazo](https://i.gyazo.com/44feccde5254962493aa8eaa02662983.png)](https://gyazo.com/44feccde5254962493aa8eaa02662983)[![Image from Gyazo](https://i.gyazo.com/b94ea59eb6cd1fc9d3ad2eb94ad67559.png)](https://gyazo.com/b94ea59eb6cd1fc9d3ad2eb94ad67559)

::::

::::details アプリパスワードの生成
・検索欄に「アプリパスワード」と入力する。⇨`アプリパスワード（セキュリティ）`こちらから生成する
[ページを翻訳機能で日本語にしている場合は検索欄からは以下のように表示されない]
[![Image from Gyazo](https://i.gyazo.com/ccfeea58fd79b3bb876fcd79f290c4b8.png)](https://gyazo.com/ccfeea58fd79b3bb876fcd79f290c4b8)
::::

# Heroku側で環境変数の設定
[![Image from Gyazo](https://i.gyazo.com/15227f6d8e12d5a1e0f1cc0c957b57d6.png)](https://gyazo.com/15227f6d8e12d5a1e0f1cc0c957b57d6)

[![Image from Gyazo](https://i.gyazo.com/150605298e0786d526073ae975e56245.png)](https://gyazo.com/150605298e0786d526073ae975e56245)

[![Image from Gyazo](https://i.gyazo.com/e353d70537861a131504565126cd0ddf.png)](https://gyazo.com/e353d70537861a131504565126cd0ddf)