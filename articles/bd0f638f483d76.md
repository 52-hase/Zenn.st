---
title: "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---
### é–‹ç™ºç’°å¢ƒ
- macOS
- VSCode
- Rails 7.1.3.3
- ruby-3.2.3
- PostgreSQL 16.2

### è¡Œã„ãŸã„ã“ã¨
- 

### æ€’ã£ã¦ã„ã‚‹å•é¡Œ
- 

### åŸå› 
- 
<br>
<br>
<br>

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆã€ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã€æ›²ã‚’è¿½åŠ ã™ã‚‹æµã‚Œï¼ˆHerokuã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ PostgreSQLï¼‰

## ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆã®ä½œæˆ â‡¨ ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®ä½œæˆ â‡¨ ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’è¿½åŠ 
```sql
INSERT INTO live_events (name, date, created_at, updated_at)
VALUES ('YOASOBI LIVE IN THE USA (2024/4/18.21)', '2023-08-10', NOW(), NOW());
        ã€€ã€€ã€€ã€€ã€€ã€€ã€€   ã€€â†‘ ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€          â†‘
        ã€€ã€€ã€€[ç™»éŒ²ã—ãŸã„ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆå]ã€€ã€€ã€€ã€€ã€€ã€€ã€€[ãƒ‡ãƒ¼ã‚¿è¿½åŠ å¹´æœˆæ—¥]
```
## ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®è¿½åŠ 
```
INSERT INTO artists (name, created_at, updated_at) 
VALUES ('YOASOBI', NOW(), NOW());
          ã€€ â†‘
    [ç™»éŒ²ã—ãŸã„ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå]
```
## ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’è¿½åŠ 
```
INSERT INTO live_events_artists (live_event_id, artist_id)
SELECT 100, id FROM artists WHERE name IN ('YOASOBI');
        â†‘
[è¿½åŠ ã—ãŸã„ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆID]
```
ãƒ»`YOASOBI LIVE IN THE USA (2024/4/18.21)`ã¨ã„ã†ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆã« `YOASOBI`ã¨ã„ã†ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚

## ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®idã‚’å–å¾— â‡¨ Spotify_track_idã®å–å¾— â‡¨ musicsãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
ãƒ»`rails console`ã‹ã‚‰ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®idã‚’å–å¾—ã™ã‚‹ã€‚
```
artist_name = 'YOASOBI'

artists = RSpotify::Artist.search(artist_name)
if artists.any?
  puts "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ:"
  artists.each do |artist|
    puts "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå: #{artist.name}, Spotify ID: #{artist.id}"
  end
else
  puts "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"
end
```
ãƒ»å–å¾—ã—ãŸã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®idã§ã€ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®`Spotify_track_id`ã‚’å…¨æ›²å–å¾—ã™ã‚‹ã€‚
```
# RSpotifyã§ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’æ¤œç´¢
artist = RSpotify::Artist.find('å–å¾—ã—ãŸã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆid')

if artist
  puts "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå: #{artist.name}"
  puts "æ›²ä¸€è¦§:"

  albums = artist.albums(limit: 50)

  albums.each do |album|
    puts "ã‚¢ãƒ«ãƒãƒ å: #{album.name}"
    
    tracks = album.tracks(limit: 50)

    tracks.each do |track|
      puts "  æ›²å: #{track.name}, Spotify ID: #{track.id}"
    end
    puts "-" * 100
  end
else
  puts "æ›²ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"
end
```

ãƒ»musicsãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã™ã‚‹
```
INSERT INTO musics (name, spotify_track_id, artist_id, artist_name, live_event_id, created_at, updated_at)
VALUES 
    ('[æ›²å]', '[spotify_track_id]', [artist_id], '[artist_name]', [live_event_id], NOW(), NOW());
```


ãƒ»æ›²ã¯`Spotify_track_id`ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§è¡¨ç¤ºã•ã‚Œå†ç”Ÿã§ãã¾ã™ã€‚
ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯`live_events`,`artists`,`musics`ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã‚ã‚‹ã®ã§ãã‚Œãã‚Œè¿½åŠ ã™ã‚‹ã€‚
ãƒ»è¿½åŠ ã™ã‚‹æµã‚Œã¯ã€



::::details 

'''


'''

::::

<br>
<br>
<br>