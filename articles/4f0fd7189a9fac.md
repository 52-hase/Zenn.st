---
title: "静的OGPの設定方法（開発環境 / 本番環境）"
emoji: "📘"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [OGP]
published: false
---
### 開発環境
- macOS
- VSCode
- Rails 7.1.3.3
- ruby-3.2.3
- PostgreSQL 16.2

### 行いたいこと
- `X（Twitter）`でアプリのリンクをポストする際に指定した画像やタイトルの表示をする。
<br>
<br>
<br>

# Gemのインストール
・`Gemfile`に以下を追記し`bundle install`
```js:Gemfile
gem "meta-tags"
```
# rails g meta_tags:install コマンドでファイルを追加
・ターミナルで以下のコマンドを実行
```js:ターミナル
$ rails g meta_tags:install
```
・こちらのファイルが追加される（修正追記不要）
```js:config/initializers/meta_tags.rb
MetaTags.configure do |config|

# コメントアウトで様々な記載

end
```

# display_meta_tagsメソッドの追記
・`app/views/layouts/application.html.erb`に以下の追記をする
```rb:app/views/layouts/application.html.erb
<!DOCTYPE html>
<html>
  <head>
    <title>Myapp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", media: "all", as: "style", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>

    <%= display_meta_tags(default_meta_tags) %>   # これを追記
```

# default_meta_tags メソッドの記載
・`app/helpers/application_helper.rb`に以下の様に記載
```rb:app/helpers/application_helper.rb
module ApplicationHelper
  def default_meta_tags
    {
      site: 'Live Fes',
      title: '音楽ライブ・フェスの余韻を共有できるサービス',
      reverse: true,
      charset: 'utf-8',
      description: 'Live Fesでは、音楽ライブやフェスの余韻や喪失感を参加者同士で共通し、感想や思い出を語り合うことができます。',
      keywords: '音楽,ライブ,フェス,余韻,喪失感,共有',
      canonical: request.original_url,
      separator: '|',
      og:{
        site_name: :site,
        title: :title,
        description: :description,
        type: 'website',
        url: request.original_url,
        image: image_url('ogp.png'),
        local: 'ja-JP'
      },
      twitter: {
        card: 'summary_large_image',
        site: '@obvyamdrss',
        image: image_url('ogp.png')
      }
    }
  end
end
```

https://chrome.google.com/webstore/detail/localhost-open-graph-debu/kckjjmiilgndeaohcljonedmledlnkij

[![Image from Gyazo](https://i.gyazo.com/f3ed5e696c02a2ce3120b937a3bef10c.png)](https://gyazo.com/f3ed5e696c02a2ce3120b937a3bef10c)

[![Image from Gyazo](https://i.gyazo.com/8fd55e6bdb09ae5b1b812c444d241964.png)](https://gyazo.com/8fd55e6bdb09ae5b1b812c444d241964)

[![Image from Gyazo](https://i.gyazo.com/c1ad4f9fa8a14f05fcaf14943f6278a6.png)](https://gyazo.com/c1ad4f9fa8a14f05fcaf14943f6278a6)

[![Image from Gyazo](https://i.gyazo.com/7146278c575e44963155f9dc07266ad5.png)](https://gyazo.com/7146278c575e44963155f9dc07266ad5)