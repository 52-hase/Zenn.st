---
title: "Dockerについての基礎学習"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Docker]
published: false
---
### 開発環境
- macOS
- VSCode
- Rails 7.1.3.3
- ruby-3.2.3
- PostgreSQL 16.2
- Heroku

### 行いたいこと
- Dockerの基本概念から応用技術まで全体像を理解する


<br>
<br>
<br>


# Dockerの基本概念
・Docker社が提供するコンテナ型仮想化技術を実現するプロダクト
・従来のホスト型仮想化と異なり、ゲストOSを起動せずにDocker Engine上でコンテナを作成
・軽量で高速な動作が特徴

# Dockerを使用するメリット
・複数開発者間でのプログラム実行環境の共有が簡単になる
・複雑なアーキテクチャでも簡単にどんなマシンにでも環境を共有できる
・従来の仮想化より軽量なファイル共有が可能

Docker Engineの4つの主要要素

⓪ Docker Engine
・Dockerを利用するための常駐プログラム
・Docker for Mac、Docker for Windowsなどをインストールすることで利用可能

① イメージ（Image）
・コンテナの実行環境を起動するのに必要な設定ファイルをまとめたもの
・イメージからコンテナを起動する関係性
・タグによるバージョン管理が可能（例：nginx:latest、nginx:1.14-perl）
・レイヤー構造で構成され、一度作成されると読み取り専用
・取得方法は「Docker Hubからダウンロード」または「Dockerfileから自作」の2つ

② コンテナ
・イメージから起動されるアプリケーションの実行環境
・作成、起動、停止、削除などの操作が可能
・起動中のコンテナにはattachやexecコマンドでアクセス可能
・コンテナからイメージを作成することも可能（ただしDockerfileからの作成が推奨）

③ Docker Hub（Container Registry）
・イメージを共有するためのクラウドサービス
・GitHubと同様の仕組みでイメージの共有が可能
・アカウント作成、リポジトリ作成、タグ付け、pushの手順で共有

主要なDockerコマンド
・docker images：ローカルのイメージ一覧表示
・docker pull：イメージの取得
・docker build：Dockerfileからイメージ作成
・docker run：イメージの取得からコンテナ起動までを一括実行
・docker ps：コンテナ一覧表示
・docker start/stop：コンテナの起動・停止
・docker rm：コンテナの削除

Dockerfileの基本記述
・FROM イメージ名:タグ名（ベースとなるイメージを指定）
・RUN パッケージ等インストールコマンド（ミドルウェアをインストール）
・CMD コマンド指定（コンテナ作成後に実行するコマンド）

コンテナ操作の詳細コマンド
・docker create --name コンテナ名 イメージ名：コンテナ作成
・docker start コンテナ名：コンテナ起動
・docker pause/unpause コンテナ名：一時停止・再開
・docker restart コンテナ名：再起動
・docker stop コンテナ名：停止
・docker rm コンテナ名：削除
・docker attach コンテナ名：起動中コンテナに接続
・docker exec -it コンテナ名 /bin/bash：新しいシェルで接続
・docker commit コンテナ名 イメージ名:タグ名：コンテナからイメージ作成

Docker Hubでの共有手順
・Docker Hub上でリポジトリを作成
・ローカルでイメージを作成
・docker loginでログイン
・docker tag <イメージ名> <Docker Hub ID>/<新規イメージ名>:<タグ名>でタグ付け
・docker push <Docker Hub ID>/<イメージ名>:<タグ名>でプッシュ


<br>
<br>


### 以上です。

<br>
<br>
<br>