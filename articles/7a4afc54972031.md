---
title: "scope ã«ã¤ã„ã¦"
emoji: "ğŸ‘¦"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [scope]
published: false
---
# ç›®çš„
scope ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¾ã™

# å†…å®¹
1. scope ã¨ã¯ï¼Ÿ

# scope ã¨ã¯ï¼Ÿ
```scope```ã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰ã«è¨˜è¼‰ã™ã‚‹è¤‡é›‘ãªã‚³ãƒ¼ãƒ‰ã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰ã™ã‚‹ã“ã¨ã§ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚¹ãƒƒã‚­ãƒªã•ã›ã‚‹ã€‚

app/models/article.rbï¼ˆdef report_summaryã®å–å¾—ç¯„å›²ã‚’æŒ‡å®šã—ãƒ¡ã‚½ãƒƒãƒ‰ã®è¨˜è¼‰ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«
```
scope :published_until_today, -> { where('published_at <= ?', Time.zone.today.end_of_day) }

scope :published_yesterday, -> { where('published_at >= ? AND published_at <= ?', Date.yesterday.beginning_of_day, Date.yesterday.end_of_day) }
```

app/mailers/article_mailer.rbï¼ˆå…¬é–‹è¨˜äº‹ã®å–å¾—ã®ãƒ¡ã‚½ãƒƒãƒ‰
```
class ArticleMailer < ApplicationMailer
  def report_summary
    @published_articles = Article.published_until_today
    @published_yesterday = Article.published_yesterday
  end
end
```


scopeã‚’ä½¿ã‚ãšã« app/mailers/article_mailer.rb ã«ã®ã¿ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ›¸ã„ãŸå ´åˆ
```
class ArticleMailer < ApplicationMailer
  def report_summary
    @published_articles = Article.where('published_at <= ?', Time.zone.today.end_of_day)
    @published_yesterday = Article.where('published_at >= ? AND published_at <= ?', Date.yesterday.beginning_of_day, Date.yesterday.end_of_day)
  end
end
```