---
title: "アーキテクチャについて"
emoji: "🙌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [アーキテクチャ]
published: false
---






[![Image from Gyazo](https://i.gyazo.com/2d42d30ec5605e5428f0312e6811345b.png)](https://gyazo.com/2d42d30ec5605e5428f0312e6811345b)



全体構成
Ruby on Rails を中心とした モノリシック構成のWebアプリケーション
ユーザーは ブラウザ（PC / スマホ） からアクセス
本番環境は Heroku、ファイル保存は AWS S3
リアルタイム機能は ActionCable（WebSocket） を使用

クライアント（ユーザー）
ブラウザからアプリにアクセス
HTTP / HTTPS および WebSocket でサーバーと通信
操作内容（投稿、チャットなど）をフロントエンドへ送信

###　フロントエンド
- JavaScript
画面の動的更新（非同期通信 / Ajax）
ユーザー操作に応じた即時UI更新
- Bootstrap
レスポンシブ対応のUIコンポーネント
デザインの統一・実装工数の削減
- RailsのViewと組み合わせて表示を制御

###　バックエンド（Heroku上）
- Ruby 3.2.2 + Ruby on Rails 7.1.3
アプリケーションの中核
MVCアーキテクチャを採用
- Controller
リクエストの受付
モデル・外部APIとの連携
- Model（ActiveRecord）
データベース操作
バリデーション・ビジネスロジック管理
- View
フロントエンドへレスポンスを返却

###　リアルタイム通信
- WebSocket（ActionCable）
チャットなどのリアルタイム機能を実現
クライアントと双方向通信
ページ更新なしでデータ反映

###　データベース
- PostgreSQL
ユーザー情報、投稿データ、音楽データを永続化
ActiveRecord を通じて操作
- Heroku Postgres として運用

###　ファイルストレージ
- Active Storage
Rails標準のファイル管理機構
- AWS S3
画像・アップロードファイルの保存先
アプリサーバーとストレージを分離し、拡張性を確保

###　外部API連携
- Spotify Web API（gem rspotify）
楽曲・アーティスト情報の取得
検索・表示機能としてアプリ内で利用
- Rails から外部APIへリクエストを送信

###　開発環境
- Docker
Rails / PostgreSQL / Node.js をコンテナ化
開発環境の統一・再現性を確保
チーム開発や環境構築を容易にする






[![Image from Gyazo](https://i.gyazo.com/56cc910208d146d335b18a854ec8a7a4.png)](https://gyazo.com/56cc910208d146d335b18a854ec8a7a4)


[![Image from Gyazo](https://i.gyazo.com/7bee5032b0a11ebae3010ca6f0fdd9a0.png)](https://gyazo.com/7bee5032b0a11ebae3010ca6f0fdd9a0)

[![Image from Gyazo](https://i.gyazo.com/d9145c07b6881ab36e535e917ba5595f.png)](https://gyazo.com/d9145c07b6881ab36e535e917ba5595f)



最終形
[![Image from Gyazo](https://i.gyazo.com/7968fa51203a3b85b8722ce318ddb92c.png)](https://gyazo.com/7968fa51203a3b85b8722ce318ddb92c)


Ruby on Rails を中心としたモノリシック構成のWebアプリケーション
ユーザーはブラウザからアプリにアクセスし、JavaScript と Bootstrap によって構築されたフロントエンドを通じて操作を行う

ユーザーからのリクエストは、HTTP/HTTPS 通信により Heroku 上で稼働する Ruby on Rails アプリケーションサーバーに送信される

Rails では MVC アーキテクチャを採用しており、Controller がリクエストを受け取り、Model を介してデータベース操作やビジネスロジックを実行し、結果をレスポンスとして返却する

データの永続化には PostgreSQL を使用しており、ActiveRecord を通じてユーザー情報や投稿データ、音楽関連データを管理している

リアルタイム性が求められる機能については、Rails 標準の ActionCable を利用している
WebSocket による双方向通信を行うことで、クライアントとサーバー間で即時にデータを同期する

画像やファイルの保存には Rails の Active Storage を利用し、実際のファイルは AWS S3 に保存する
これにより、アプリケーションサーバーとストレージを分離し、拡張性と保守性を高めている

また、外部サービスとの連携として Spotify Web API を利用している
gem rspotify を通じて楽曲やアーティスト情報を取得し、アプリ内での表示やデータ管理に活用している

開発環境には Docker を採用し、Rails・PostgreSQL・Node.js をコンテナ化することで、ローカル環境と本番環境の差異を最小限に抑えている