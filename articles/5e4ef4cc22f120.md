---
title: "アーキテクチャについて"
emoji: "🙌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [アーキテクチャ]
published: false
---



# リアルタイムチャットアプリ

開発環境 Docker 
フロントエンド JavaScript, Bootstrap 
バックエンド Ruby ver3.2.2, Ruby on Rails ver7.1.3, Node.js, WebSocket (ActionCable) 
データベース PostgreSQL 
インフラ Heroku, AWS S3 
Web API Spotify Web API（gem 'rspotify'）





[ Browser ]
    |
    |  HTTP / HTTPS
    v
[ Frontend ]
(JavaScript / Bootstrap)
    |
    |  HTTP / WebSocket
    v
[ Backend API ]
(Rails 7.1 / Ruby 3.2.2)
    |
    |----------------------|
    |                      |
    v                      v
[ PostgreSQL ]        [ ActionCable ]
( DB )                (WebSocket)
    |
    v
[ Active Storage ]
    |
    v
[ AWS S3 ]

    ^
    |
[ Spotify Web API ]



Ruby on Rails を中心としたモノリシック構成のWebアプリケーションです。
ユーザーはブラウザからアプリにアクセスし、JavaScript と Bootstrap によって構築されたフロントエンドを通じて操作を行います。

ユーザーからのリクエストは、HTTP/HTTPS 通信により Heroku 上で稼働する Ruby on Rails アプリケーションサーバーに送信されます。
Rails では MVC アーキテクチャを採用しており、Controller がリクエストを受け取り、Model を介してデータベース操作やビジネスロジックを実行し、結果をレスポンスとして返却します。

データの永続化には PostgreSQL を使用しており、ActiveRecord を通じてユーザー情報や投稿データ、音楽関連データを管理しています。

リアルタイム性が求められる機能については、Rails 標準の ActionCable を利用しています。
WebSocket による双方向通信を行うことで、クライアントとサーバー間で即時にデータを同期します。

画像やファイルの保存には Rails の Active Storage を利用し、実際のファイルは AWS S3 に保存しています。
これにより、アプリケーションサーバーとストレージを分離し、拡張性と保守性を高めています。

また、外部サービスとの連携として Spotify Web API を利用しています。
gem rspotify を通じて楽曲やアーティスト情報を取得し、アプリ内での表示やデータ管理に活用しています。

開発環境には Docker を採用し、Rails・PostgreSQL・Node.js をコンテナ化することで、ローカル環境と本番環境の差異を最小限に抑えています。