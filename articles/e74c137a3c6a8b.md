---
title: "Xã¸ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®å®Ÿè£…"
emoji: "ğŸ”˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [X]
published: true
---
### é–‹ç™ºç’°å¢ƒ
- macOS
- VSCode
- Rails 7.1.3.3
- ruby-3.2.3
- PostgreSQL 16.2
- Heroku

### è¡Œã„ãŸã„ã“ã¨
- Xã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã€ä»»æ„ã®ç®‡æ‰€ã«è¨­ç½®ã™ã‚‹ã€‚
- ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒ«ãƒ¼ãƒ ã®åå‰ãŒèª­ã¿è¾¼ã¾ã‚Œãƒã‚¹ãƒˆã®æ–‡è¨€ã«çµ„ã¿è¾¼ã¾ã‚Œã‚‹ã€‚


<br>
<br>

# è¡¨ç¤ºã•ã›ãŸã„Viewã«ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‚’è¨˜è¼‰ã™ã‚‹
ãƒ»Xã®ãƒ­ã‚´ã®å¾Œã‚ã«ã€Œ`ã§ãƒ©ã‚¤ãƒ–ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹`ã€ã¨ã„ã†æ–‡è¨€ã‚’ã¤ã‘åŠ ãˆã€`Xã§ãƒ©ã‚¤ãƒ–ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹`ã¨ã„ã†ãƒœã‚¿ãƒ³ã«ã™ã‚‹ã€‚
```rb:app/views/live_rooms/show.html.erb
<div id="share-button" data-room-name="<%= @live_room.name %>" data-room-url="<%= live_room_path(@live_room) %>">
  <button id="share-to-x">
    <%= image_tag 'logo-black.png', alt: 'X Logo', style: 'width: 15px; height: 15px;' %>
    ã§ãƒ©ã‚¤ãƒ–ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹
  </button>
</div>
```

# Xã®ãƒ­ã‚´ã‚’è¨­å®šã™ã‚‹
ãƒ»Xã®ãƒ­ã‚´ã¯å…¬å¼ã‚µã‚¤ãƒˆã®`ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ`ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚
ãƒ»`app/assets/images/logo-black.png`ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã™ã‚‹ã€‚ï¼ˆ`app/assets/images`ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ï¼‰
https://about.x.com/ja/who-we-are/brand-toolkit


# cssã®é©ç”¨ã‚’ã™ã‚‹
ãƒ»ãƒœã‚¿ãƒ³ã®å¤§ãã•ã‚„é…ç½®ã€ãƒ›ãƒãƒ¼æ™‚ã®è‰²ãªã©ã‚’èª¿æ•´ã™ã‚‹ã€‚
```rb:app/assets/stylesheets/application.bootstrap.scss
/* Xã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ */
#share-to-x {
  background-color: #f0f0f0; /* é€šå¸¸æ™‚ã®èƒŒæ™¯è‰² */
  border: 1px solid #ccc; /* é€šå¸¸æ™‚ã®ãƒœãƒ¼ãƒ€ãƒ¼ */
  padding: 10px;
  border-radius: 5px;
  transition: background-color 0.3s, border-color 0.3s;
  display: flex; #/* ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹ãƒœãƒƒã‚¯ã‚¹ã‚’ä½¿ç”¨ */
  align-items: center; #/* ã‚¢ã‚¤ã‚³ãƒ³ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¸¦ã«ä¸­å¤®æƒãˆ */
  width: 200px; #/* ãƒœã‚¿ãƒ³ã®æ¨ªå¹…ã‚’è¨­å®š */
  text-align: left; #/* ãƒ†ã‚­ã‚¹ãƒˆã‚’å·¦æƒãˆã«ã™ã‚‹ */
  justify-content: center; #/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¸­å¤®æƒãˆã«ã™ã‚‹ */
  margin-left: 20px; #/* å·¦å´ã®ãƒãƒ¼ã‚¸ãƒ³ */
  margin-top: 10px; #/* ä¸Šå´ã®ãƒãƒ¼ã‚¸ãƒ³ */
}

#share-to-x:hover {
  background-color: #efeff1; /* ãƒ›ãƒãƒ¼æ™‚ã®èƒŒæ™¯è‰² */
  border-color: #141515; /* ãƒ›ãƒãƒ¼æ™‚ã®ãƒœãƒ¼ãƒ€ãƒ¼è‰² */
  color: rgb(14, 14, 14); #/* ãƒ†ã‚­ã‚¹ãƒˆè‰²ã‚’å¤‰æ›´ */
}
```

# ã“ã“ã¾ã§ã®è¨˜è¼‰ã§è¡¨ç¤ºã•ã‚Œã‚‹ãƒœã‚¿ãƒ³
ãƒ»ä»Šå›ã¯ãƒãƒ£ãƒƒãƒˆæ¬„ã®éš£ã«ãƒœã‚¿ãƒ³ã‚’è¨­ç½®ã—ãŸã€‚
[![Image from Gyazo](https://i.gyazo.com/4aed2df90157b712ebfae9bb67313106.png)](https://gyazo.com/4aed2df90157b712ebfae9bb67313106)

# Xã¸ã®é·ç§»ã¨ãƒã‚¹ãƒˆã®æ–‡è¨€ã®è¨˜è¼‰ã™ã‚‹

```js:app/javascript/share.js
document.addEventListener('DOMContentLoaded', function() {
  const shareButton = document.getElementById('share-button');
  const liveRoomName = shareButton.getAttribute('data-room-name');
  const appUrl = `https://www.live-fes.com${shareButton.getAttribute('data-room-url')}`;

  document.getElementById('share-to-x').addEventListener('click', function() {
    const text = `${encodeURIComponent(liveRoomName)}%20ã®ãƒ©ã‚¤ãƒ–ãƒ«ãƒ¼ãƒ ã§æ€ã„å‡ºã‚’å…±æœ‰ã—ã‚ˆã†ï¼%20%23Live_Fes%20%0a`;
    const url = `https://x.com/intent/tweet?text=${text}&url=${encodeURIComponent(appUrl)}`;

    window.open(url, "_blank");
  });
});
```
ãƒ»ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ–°ã—ã„ã‚¿ãƒ–ã§ãƒã‚¹ãƒˆã‚’é–‹ãã€‚
ãƒ»ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚„ãƒ«ãƒ¼ãƒ åãŒä»˜ã‘åŠ ãˆã‚‰ã‚Œãƒã‚¹ãƒˆã®å†…å®¹ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚
:::details ã‚³ãƒ¼ãƒ‰ã®è©³ã—ã„è§£èª¬
```rb:app/javascript/share.js
// DOMã®èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ãŸã‚‰å®Ÿè¡Œ
document.addEventListener('DOMContentLoaded', function() {

  // ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³è¦ç´ ã‚’å–å¾—
  const shareButton = document.getElementById('share-button');

  // ãƒ‡ãƒ¼ã‚¿å±æ€§ã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ«ãƒ¼ãƒ ã®åå‰ã‚’å–å¾—
  const liveRoomName = shareButton.getAttribute('data-room-name');

  // data-room-urlã‹ã‚‰ãƒ‘ã‚¹ã‚’å–å¾—ã—ã€ãƒ™ãƒ¼ã‚¹URLã¨çµåˆ
  const appUrl = `https://www.live-fes.com${shareButton.getAttribute('data-room-url')}`;

  // Xã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
  document.getElementById('share-to-x').addEventListener('click', function() {

    // ãƒã‚¹ãƒˆæœ¬æ–‡ã‚’ä½œæˆ
    // encodeURIComponent()ã§ç‰¹æ®Šæ–‡å­—ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
    // %23ã¯ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã€%20ã¯åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã€%0aã¯æ”¹è¡Œ
    const text = `${encodeURIComponent(liveRoomName)}%20ã®ãƒ©ã‚¤ãƒ–ãƒ«ãƒ¼ãƒ ã§æ€ã„å‡ºã‚’å…±æœ‰ã—ã‚ˆã†ï¼%20%23Live_Fes%20%0a`;

    // æœ€çµ‚çš„ãªãƒã‚¹ãƒˆå…±æœ‰URL
    // ãƒ†ã‚­ã‚¹ãƒˆã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³URLã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦çµåˆ
    const url = `https://x.com/intent/tweet?text=${text}&url=${encodeURIComponent(appUrl)}`;

    // æ–°ã—ã„ã‚¿ãƒ–ã§ãƒã‚¹ãƒˆç”»é¢ã‚’é–‹ã
    window.open(url, "_blank");
  });
});
```
:::

ãƒ»`{encodeURIComponent(liveRoomName)}%20ã®ãƒ©ã‚¤ãƒ–ãƒ«ãƒ¼ãƒ ã§æ€ã„å‡ºã‚’å…±æœ‰ã—ã‚ˆã†ï¼`ã§ãƒ©ã‚¤ãƒ–ãƒ«ãƒ¼ãƒ ã®åå‰ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ã€ãƒã‚¹ãƒˆã®æ–‡è¨€ã‚’ç”Ÿæˆã™ã‚‹ã€‚
ãƒ»`%23Live_Fes`ã§`#Live_Fes`ã‚’ç”Ÿæˆã™ã‚‹ã€‚
[![Image from Gyazo](https://i.gyazo.com/beaa29026b8a3f6594d1cfb0fb30423a.png =900x)](https://gyazo.com/beaa29026b8a3f6594d1cfb0fb30423a)

# share.jsãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è¨˜è¼‰ã™ã‚‹
ãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦JavaScriptã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ãƒ—ãƒªã«åæ˜ ã•ã›ã‚‹ã€‚
```js:app/javascript/application.js
import './share'
```


<br>

### ä»¥ä¸Šã§Xã¸ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®è¨­å®šã¯çµ‚äº†ã§ã™ã€‚

<br>
<br>

