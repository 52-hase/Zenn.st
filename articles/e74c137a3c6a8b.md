---
title: "Xã¸ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®å®Ÿè£…"
emoji: "ğŸ”˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [X]
published: false
---
### é–‹ç™ºç’°å¢ƒ
- macOS
- VSCode
- Rails 7.1.3.3
- ruby-3.2.3
- PostgreSQL 16.2
- Heroku

### è¡Œã„ãŸã„ã“ã¨
- Xã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã€ä»»æ„ã®ç®‡æ‰€ã«è¨­ç½®ã™ã‚‹ã€‚
- 


<br>
<br>
<br>

# è¡¨ç¤ºã•ã›ãŸã„Viewã«ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‚’è¨˜è¼‰
```rb:app/views/live_rooms/show.html.erb
<div id="share-button" data-room-name="<%= @live_room.name %>" data-room-url="<%= live_room_path(@live_room) %>">
  <button id="share-to-x">
    <%= image_tag 'logo-black.png', alt: 'X Logo', style: 'width: 15px; height: 15px;' %>
    ã§ãƒ©ã‚¤ãƒ–ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹
  </button>
</div>
```

# Xã¸ã®é·ç§»ã¨ãƒã‚¹ãƒˆã®æ–‡è¨€ã®è¨˜è¼‰
```rb:app/javascript/share.js
document.addEventListener('DOMContentLoaded', function() {
  const shareButton = document.getElementById('share-button');
  const liveRoomName = shareButton.getAttribute('data-room-name');  // ãƒ‡ãƒ¼ã‚¿å±æ€§ã‹ã‚‰ãƒ«ãƒ¼ãƒ åã‚’å–å¾—
  const appUrl = `https://www.live-fes.com${shareButton.getAttribute('data-room-url')}`;  // URLã‚’å–å¾—

  document.getElementById('share-to-x').addEventListener('click', function() {
    const text = `${encodeURIComponent(liveRoomName)}%20ã®ãƒ©ã‚¤ãƒ–ãƒ«ãƒ¼ãƒ ã§æ€ã„å‡ºã‚’å…±æœ‰ã—ã‚ˆã†ï¼%20%23Live_Fes%20%0a`;  // åå‰ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
    const url = `https://x.com/intent/tweet?text=${text}&url=${encodeURIComponent(appUrl)}`;  // URLã‚‚ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰

    window.open(url, "_blank");
  });
});
```
# share.jsãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è¨˜è¼‰
```rb:app/javascript/application.js
import './share'
```


<br>
<br>
<br>