---
title: "Laravelã§ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã®ä½œæˆ"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Laravel, PHP]
published: false
---
### é–‹ç™ºç’°å¢ƒ
- macOS
- VSCode
- Dockerã«ã‚ˆã‚‹ç’°å¢ƒæ§‹ç¯‰ï¼ˆæœ¬æ–‡ã«ã¦è¨˜è¼‰ï¼‰

### è¡Œã„ãŸã„ã“ã¨
- è¦šæ›¸ã¨ã—ã¦è¨˜è¼‰ã—ã¾ã™ã€‚


<br>
<br>

# é–‹ç™ºç’°å¢ƒã¨ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
- `Laravel`ã®é–‹ç™ºç’°å¢ƒã¯`Docker`ã§æ§‹ç¯‰ã—ã¾ã™ã€‚
```:é–‹ç™ºç’°å¢ƒ
ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼šLaravel Framework 9.x.x(LaravelMix)
ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼šMYSQL 5.7.36
ãƒ»DBç®¡ç†ãƒ„ãƒ¼ãƒ« : phpMyAdmin latest
ãƒ»PHPï¼šPHP 8.0.x
ãƒ»Nginxï¼šNginx latest
ãƒ»Node.jsï¼šnode 14.18-alpine
ãƒ»mailï¼šmailhog latest
```

```:ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
Laravel_Task_appï¼ˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰â€» ä»»æ„ã®åå‰
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ docker 
â”‚   â”œâ”€â”€ php 
â”‚   â”‚   â”œâ”€â”€ Dockerfile 
â”‚   â”‚   â””â”€â”€ php.ini 
â”‚   â””â”€â”€ nginx 
â”‚       â””â”€â”€ default.conf 
â”œâ”€â”€ phpMyAdmin
â””â”€â”€ src 
    â””â”€â”€  LaravelProjectï¼ˆLaravelã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰â€» ä»»æ„ã®åå‰
```

<br>
<br>

# ç’°å¢ƒæ§‹ç¯‰ - Laravelã®å°å…¥
https://zenn.dev/eguchi244_dev/books/laravel-tutorial-books/viewer/laravel-introduction

<br>

- ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
$ mkdir Laravel_Task_app  # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ

$ cd Laravel_Task_app  # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
```
- `docker-compose.yml`ã®ä½œæˆï¼ˆ`Docker Compose`ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
$ touch docker-compose.yml
```
:::details docker-yml ã®ã‚³ãƒ¼ãƒ‰
```yml:docker-compose.yml
version: '3'
services:
  db:
    image: mysql:5.7.36
    platform: linux/amd64  # Macã®ARM64ã«å¯¾å¿œã•ã›ã‚‹
    container_name: "mysql_test"
    environment:
        MYSQL_ROOT_PASSWORD: root
        MYSQL_DATABASE: mysql_test_db
        MYSQL_USER: admin
        MYSQL_PASSWORD: secret
        TZ: 'Asia/Tokyo'
    # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã®æŒ‡å®šï¼ˆãƒ›ã‚¹ãƒˆå´ãƒãƒ¼ãƒˆï¼šã‚³ãƒ³ãƒ†ãƒŠå´ãƒãƒ¼ãƒˆï¼‰
    ports:
        - 3306:3306
    # ã‚³ãƒãƒ³ãƒ‰ã®æŒ‡å®š
    command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
    # åå‰ä»˜ããƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’è¨­å®šã™ã‚‹ï¼ˆåå‰ä»˜ããƒœãƒªãƒ¥ãƒ¼ãƒ :ã‚³ãƒ³ãƒ†ãƒŠå´ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®å ´æ‰€ï¼‰
    volumes:
      - db_data_test:/var/lib/mysql
      - db_my.cnf_test:/etc/mysql/conf.d/my.cnf
      - db_sql_test:/docker-entrypoint-initdb.d

  php:
    build: ./docker/php
    container_name: "php-fpm"
    # ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’è¨­å®šã™ã‚‹ï¼ˆãƒ›ã‚¹ãƒˆå´ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª:ã‚³ãƒ³ãƒ†ãƒŠå´ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®å ´æ‰€ï¼‰
    volumes:
      - ./src:/var/www

  nginx:
    image: nginx:latest
    container_name: "nginx_test"
    # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã®æŒ‡å®šï¼ˆãƒ›ã‚¹ãƒˆå´ãƒãƒ¼ãƒˆï¼šã‚³ãƒ³ãƒ†ãƒŠå´ãƒãƒ¼ãƒˆï¼‰
    ports:
      - 80:80
    # ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’è¨­å®šã™ã‚‹ï¼ˆãƒ›ã‚¹ãƒˆå´ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª:ã‚³ãƒ³ãƒ†ãƒŠå´ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®å ´æ‰€ï¼‰
    volumes:
      - ./src:/var/www
      - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf
    # ã‚µãƒ¼ãƒ“ã‚¹ã®ä¾å­˜é–¢ä¿‚ã‚’æŒ‡å®šï¼ˆnginxã‚’phpã«ä¾å­˜ã•ã›ã‚‹ï¼‰
    depends_on:
      - php

  phpmyadmin:
    image: phpmyadmin/phpmyadmin:latest
    container_name: "phpmyadmin_test"
    environment:
      - PMA_ARBITRARY=1 # ã‚µãƒ¼ãƒè¨­å®šï¼šã‚µãƒ¼ãƒãƒ¼ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ä»¥å¤–ã‚‚æŒ‡å®š
      - PMA_HOST=db # ãƒ›ã‚¹ãƒˆè¨­å®šï¼šdbã‚’æŒ‡å®š
      - PMA_USER=admin # åˆæœŸãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šï¼šadminã‚’æŒ‡å®š
      - PMA_PASSWORD=secret # åˆæœŸPWè¨­å®šï¼šsecretã‚’æŒ‡å®š
    # dbï¼ˆã‚µãƒ¼ãƒ“ã‚¹åï¼‰ã¨ã®ãƒªãƒ³ã‚¯ã‚’è¨­å®šã™ã‚‹
    links:
      - db
    # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã®æŒ‡å®šï¼ˆãƒ›ã‚¹ãƒˆå´ãƒãƒ¼ãƒˆï¼šã‚³ãƒ³ãƒ†ãƒŠå´ãƒãƒ¼ãƒˆï¼‰
    ports:
      - 8080:80
    # ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’è¨­å®šã™ã‚‹ï¼ˆãƒ›ã‚¹ãƒˆå´ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª:ã‚³ãƒ³ãƒ†ãƒŠå´ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®å ´æ‰€ï¼‰
    volumes:
      - ./phpmyadmin/sessions:/sessions

  node:
    image: node:14.18-alpine
    container_name: "node14.18-alpine"
    # ã‚³ãƒ³ãƒ†ãƒŠå†…ã®æ¨™æº–å‡ºåŠ›ã¨ãƒ›ã‚¹ãƒˆã®å‡ºåŠ›ã‚’è¨­å®šï¼štrueã‚’æŒ‡å®š
    tty: true
    # ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’è¨­å®šã™ã‚‹ï¼ˆãƒ›ã‚¹ãƒˆå´ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª:ã‚³ãƒ³ãƒ†ãƒŠå´ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®å ´æ‰€ï¼‰
    volumes:
      - ./src:/var/www
    # ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•å¾Œã®ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¨­å®š
    working_dir: /var/www
  mail:
    image: mailhog/mailhog
    container_name: "mailhog"
    # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã®æŒ‡å®šï¼ˆãƒ›ã‚¹ãƒˆå´ãƒãƒ¼ãƒˆï¼šã‚³ãƒ³ãƒ†ãƒŠå´ãƒãƒ¼ãƒˆï¼‰
    ports:
      - 8025:8025

# ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ãƒ™ãƒ«ã§åå‰ä»˜ããƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’å‘½åã™ã‚‹
volumes:
  db_data_test:
  db_my.cnf_test:
  db_sql_test:
```

- ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«`docker`ã¨`src`ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
Laravel_Task_app % mkdir docker && mkdir src  # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
```

- `docker`ç›´ä¸‹ã«`php`ã¨`nginx`ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
Laravel_Task_app % cd docker

docker % mkdir php && mkdir nginx  # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
```

-  `php`ç›´ä¸‹ã«`Dockerfile`ã¨`php.ini`ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
docker % cd php
php % touch Dockerfile && touch php.ini
```

:::details Dockerfile ã®ã‚³ãƒ¼ãƒ‰

```Dockerfile:Dockerfile
# Dockerimage ã®æŒ‡å®š
FROM php:8.0-fpm
COPY php.ini /usr/local/etc/php/

# Package & Library install
RUN apt-get update \
    && apt-get install -y zlib1g-dev mariadb-client vim libzip-dev \
    && docker-php-ext-install zip pdo_mysql

# Composer install
RUN php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
RUN php composer-setup.php
RUN php -r "unlink('composer-setup.php');"
RUN mv composer.phar /usr/local/bin/composer

ENV COMPOSER_ALLOW_SUPERUSER 1
ENV COMPOSER_HOME /composer
ENV PATH $PATH:/composer/vendor/bin

# WorkDir Path setting
WORKDIR /var/www

# Laravel Package install
RUN composer global require "laravel/installer"
```
:::

:::details php.ini ã®ã‚³ãƒ¼ãƒ‰
```ini:php.ini
; æ—¥ä»˜è¨­å®š
[Date]
date.timezone = "Asia/Tokyo"
; æ–‡å­—ï¼†è¨€èªè¨­å®š
[mbstring]
mbstring.internal_encoding = "UTF-8"
mbstring.language = "Japanese"
```
:::

- `nginx`ç›´ä¸‹ã«`default.conf`ã‚’ä½œæˆ
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
docker % cd nginx  # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•

nginx % touch default.conf  # ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
```

:::details default.conf ã®ã‚³ãƒ¼ãƒ‰
```conf:default.conf
server {
    listen 80;
    index index.php index.html;

    root /var/www/LaravelProject/public;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass php:9000;
        fastcgi_index index.php;
        include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
    }
}
```
:::

- `Docker`ã‚’èµ·å‹•ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã®ä½œæˆ
```
Laravel_Task_app % docker-compose up -d  # ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã—èµ·å‹•ï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œï¼‰

Laravel_Task_app % docker-compose exec php bash  # 
```

- `Laravel`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ`Composer`ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
root:/var/www# composer create-project "laravel/laravel=9.*" LaravelProject

# PHPã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ï¼ˆConmposerï¼‰ã‚’ä½¿ç”¨ã—æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã€‚
  LaravelProjectã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³9ç³»ã‚’æŒ‡å®šã—ã¦ã€
  Laravelã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
```

:::details Laravelã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦
- æœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
root:/var/www# laravel new <Laravelã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå>
```
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šï¼ˆä»Šå›ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³9ç³»ã‚’æŒ‡å®šï¼‰
```
root:/var/www# composer create-project "laravel/laravel=9.*" <Laravelã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå>
```
:::

- `Composer`ã®ã‚ªãƒ¼ãƒˆãƒ­ãƒ¼ãƒ‰è¨­å®šã«è¿½è¨˜
```json:composer.json
"autoload": {
    "psr-4": {
        "App\\": "app/",
        "App\\Models\\": "app/Models/",ã€€ã€€# ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½è¨˜

        [çœç•¥]

    }
},
```

:::details ã‚ªãƒ¼ãƒˆãƒ­ãƒ¼ãƒ‰è¨­å®šã¨ã¯
- ã‚ªãƒ¼ãƒˆãƒ­ãƒ¼ãƒ‰ã¨ã¯: ã‚¯ãƒ©ã‚¹ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«èª­ã¿è¾¼ã‚€ä»•çµ„ã¿ã®ã“ã¨ã€‚
- `composer`ã¨ã¯PHPã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€‚
- `composer.json`ã«ã‚ªãƒ¼ãƒˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®è¨­å®šã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã‚ªãƒ¼ãƒˆãƒ­ãƒ¼ãƒ‰ã‚’ç®¡ç†ã€‚
- ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã„ãŸã„æ™‚ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•ã§èª­ã¿è¾¼ã‚€å¿…è¦ãŒãªããªã‚‹ã€‚
:::

- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ç¢ºèª
```:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
root:/var/www# cd LaravelProject  # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•

root:/var/www/LaravelProject# php artisan --version  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¢ºèª
Deprecated: PHP Startup: Use of mbstring.internal_encoding is deprecated in Unknown on line 0
Laravel Framework 9.52.20
```

- ãƒ–ãƒ©ã‚¦ã‚¶ã§Laravelã®è¡¨ç¤ºã‚’ç¢ºèª
http://localhost
(`.env`ã§`APP_URL`ã«è¨˜è¼‰ã—ãŸURL)


<br>
<br>



# 







<br>
<br>
<br>

# 


::::details 

'''


'''

::::

<br>
<br>
<br>